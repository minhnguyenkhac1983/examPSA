# =============================================================================
# Equilibrium Dynamic Pricing Platform - Production Environment Configuration
# =============================================================================
# This file contains production environment variables for the complete platform
# with Kong API Gateway and latest service versions

# =============================================================================
# PLATFORM CONFIGURATION
# =============================================================================
PLATFORM_NAME=Equilibrium
PLATFORM_VERSION=2.0.0
NODE_ENV=production
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
API_VERSION=2.0.0

# =============================================================================
# DATABASE CONFIGURATION (Latest Versions)
# =============================================================================
# PostgreSQL Configuration (Version 16)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=equilibrium_prod
POSTGRES_USER=equilibrium_user
POSTGRES_PASSWORD=secure_production_password_2025
POSTGRES_SSL_MODE=require
POSTGRES_MAX_CONNECTIONS=1000
POSTGRES_POOL_SIZE=50
POSTGRES_VERSION=16
POSTGRES_IMAGE=postgis/postgis:16-3.4

# Kong Database Configuration (Version 16)
KONG_DB_HOST=kong-database
KONG_DB_PORT=5432
KONG_DB_NAME=kong_prod
KONG_DB_USER=kong_user
KONG_DB_PASSWORD=secure_kong_password_2025
KONG_DB_IMAGE=postgres:16-alpine

# MongoDB Configuration (Version 8.0)
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_DB=equilibrium_analytics_prod
MONGODB_USER=equilibrium_user
MONGODB_PASSWORD=secure_production_password_2025
MONGODB_AUTH_SOURCE=admin
MONGODB_VERSION=8.0
MONGODB_IMAGE=mongo:8.0

# Redis Configuration (Version 7.4)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=secure_redis_password_2025
REDIS_DB=0
REDIS_MAX_CONNECTIONS=1000
REDIS_TIMEOUT=30
REDIS_VERSION=7.4
REDIS_IMAGE=redis:7.4-alpine

# =============================================================================
# DATABASE URLs (Auto-generated from above configurations)
# =============================================================================
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}
MONGODB_URL=mongodb://${MONGODB_USER}:${MONGODB_PASSWORD}@${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_DB}

# =============================================================================
# MESSAGE QUEUE CONFIGURATION (Latest Versions)
# =============================================================================
# Kafka Configuration (Version 7.6.0)
KAFKA_VERSION=7.6.0
KAFKA_IMAGE=confluentinc/cp-kafka:7.6.0
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TOPIC_PREFIX=equilibrium.prod
KAFKA_GROUP_ID=equilibrium-group-prod
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=true
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_HEARTBEAT_INTERVAL_MS=10000
KAFKA_BROKER_ID=1
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=3
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
KAFKA_JMX_PORT=9101
KAFKA_JMX_HOSTNAME=kafka

# Zookeeper Configuration (Version 7.6.0)
ZOOKEEPER_VERSION=7.6.0
ZOOKEEPER_IMAGE=confluentinc/cp-zookeeper:7.6.0
ZOOKEEPER_CONNECT=zookeeper:2181
ZOOKEEPER_SESSION_TIMEOUT=30000
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000
ZOOKEEPER_SYNC_LIMIT=2

# =============================================================================
# STREAM PROCESSING CONFIGURATION (Latest Version)
# =============================================================================
# Apache Flink Configuration (Version 1.19)
FLINK_VERSION=1.19
FLINK_IMAGE=flink:1.19-scala_2.12
FLINK_JOBMANAGER_URL=http://flink-jobmanager:8081
FLINK_PARALLELISM=4
FLINK_TASKMANAGER_SLOTS=8
FLINK_CHECKPOINT_INTERVAL=60000
FLINK_STATE_BACKEND=filesystem
FLINK_JOBMANAGER_MEMORY=2048m
FLINK_TASKMANAGER_MEMORY=4096m

# =============================================================================
# KONG API GATEWAY CONFIGURATION (Latest Version)
# =============================================================================
# Kong Configuration (Version 3.4)
KONG_VERSION=3.4
KONG_IMAGE=kong:3.4-alpine
KONG_ADMIN_HOST=0.0.0.0
KONG_ADMIN_PORT=8000
KONG_PROXY_HOST=0.0.0.0
KONG_PROXY_PORT=8001
KONG_PROXY_SSL_PORT=8443
KONG_ADMIN_SSL_PORT=8444
KONG_ADMIN_GUI_PORT=8002

# Kong Database Configuration
KONG_DATABASE=postgres
KONG_PG_HOST=kong-database
KONG_PG_DATABASE=kong_prod
KONG_PG_USER=kong_user
KONG_PG_PASSWORD=secure_kong_password_2025

# Kong Plugins
KONG_PLUGINS=bundled,rate-limiting,key-auth,jwt,cors,request-transformer,response-transformer,ip-restriction,acl,prometheus,correlation-id,oauth2

# Konga Configuration
KONGA_VERSION=latest
KONGA_IMAGE=pantsel/konga:latest
KONGA_PORT=1337
KONGA_NODE_ENV=production
KONGA_HOOK_TIMEOUT=120000

# =============================================================================
# BACKEND SERVICES CONFIGURATION
# =============================================================================
# Pricing Service Configuration
PRICING_SERVICE_HOST=0.0.0.0
PRICING_SERVICE_PORT=8001
PRICING_SERVICE_WORKERS=8
PRICING_ALGORITHM=dynamic
PRICING_UPDATE_INTERVAL=30
PRICING_CACHE_TTL=300

# Analytics Service Configuration
ANALYTICS_SERVICE_HOST=0.0.0.0
ANALYTICS_SERVICE_PORT=8002
ANALYTICS_SERVICE_WORKERS=8
ANALYTICS_BATCH_SIZE=1000
ANALYTICS_FLUSH_INTERVAL=60

# Geospatial Service Configuration
GEOSPATIAL_SERVICE_HOST=0.0.0.0
GEOSPATIAL_SERVICE_PORT=8003
GEOSPATIAL_SERVICE_WORKERS=8
GEOSPATIAL_INDEX_TYPE=s2
GEOSPATIAL_PRECISION=10

# Stream Processor Configuration
STREAM_PROCESSOR_HOST=0.0.0.0
STREAM_PROCESSOR_PORT=8004
STREAM_PROCESSOR_WORKERS=8
STREAM_BATCH_SIZE=100
STREAM_FLUSH_INTERVAL=10

# WebSocket Service Configuration
WEBSOCKET_SERVICE_HOST=0.0.0.0
WEBSOCKET_SERVICE_PORT=8005
WEBSOCKET_MAX_CONNECTIONS=10000
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=60

# Authentication Service Configuration
AUTH_SERVICE_HOST=0.0.0.0
AUTH_SERVICE_PORT=8006
AUTH_SERVICE_WORKERS=8
SECRET_KEY=equilibrium-secret-key-production-2025-very-secure
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_SECRET_KEY=equilibrium-jwt-secret-key-production-2025-very-secure

# ML Pricing Service Configuration
ML_PRICING_SERVICE_HOST=0.0.0.0
ML_PRICING_SERVICE_PORT=8007
ML_PRICING_SERVICE_WORKERS=8
ML_MODEL_VERSION=2.0.0
ML_PREDICTION_CONFIDENCE_THRESHOLD=0.7
ML_MODEL_RETRAIN_INTERVAL=86400
ML_FEATURE_ENGINEERING_ENABLED=true

# Notification Service Configuration
NOTIFICATION_SERVICE_HOST=0.0.0.0
NOTIFICATION_SERVICE_PORT=8008
NOTIFICATION_SERVICE_WORKERS=8
NOTIFICATION_QUEUE_SIZE=10000
PUSH_NOTIFICATION_ENABLED=true
EMAIL_NOTIFICATION_ENABLED=true
SMS_NOTIFICATION_ENABLED=true

# i18n Service Configuration
I18N_SERVICE_HOST=0.0.0.0
I18N_SERVICE_PORT=8009
I18N_SERVICE_WORKERS=8
SUPPORTED_LANGUAGES=en,vi,es,fr,de,zh,ja,ko,th
DEFAULT_LANGUAGE=en
FALLBACK_LANGUAGE=en
TRANSLATION_CACHE_TTL=3600

# Failure Handler Service Configuration
FAILURE_HANDLER_SERVICE_HOST=0.0.0.0
FAILURE_HANDLER_SERVICE_PORT=8010
FAILURE_HANDLER_SERVICE_WORKERS=8
FAILURE_THRESHOLD=5
FAILURE_WINDOW=300
RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_ENABLED=true

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Admin Portal Configuration
ADMIN_PORTAL_HOST=0.0.0.0
ADMIN_PORTAL_PORT=3000
REACT_APP_API_URL=https://api.yourdomain.com
REACT_APP_WEBSOCKET_URL=wss://api.yourdomain.com/ws
REACT_APP_ENVIRONMENT=production
GENERATE_SOURCEMAP=false

# Mobile App Configuration
MOBILE_APP_API_URL=https://api.yourdomain.com
MOBILE_APP_WEBSOCKET_URL=wss://api.yourdomain.com/ws
MOBILE_APP_ENVIRONMENT=production
EXPO_DEVTOOLS_LISTEN_ADDRESS=0.0.0.0

# Driver App Configuration
DRIVER_APP_API_URL=https://api.yourdomain.com
DRIVER_APP_WEBSOCKET_URL=wss://api.yourdomain.com/ws
DRIVER_APP_ENVIRONMENT=production

# Flutter App Configuration
FLUTTER_API_BASE_URL=https://api.yourdomain.com
FLUTTER_WEBSOCKET_URL=wss://api.yourdomain.com/ws
FLUTTER_ENVIRONMENT=production

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Encryption Configuration
ENCRYPTION_KEY=equilibrium-encryption-key-production-2025-very-secure
ENCRYPTION_ALGORITHM=AES-256-GCM
ENCRYPTION_IV_LENGTH=16

# CORS Configuration
CORS_ORIGINS=https://yourdomain.com,https://admin.yourdomain.com,https://mobile.yourdomain.com,https://driver.yourdomain.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_CREDENTIALS=true

# Rate Limiting Configuration
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600
RATE_LIMIT_BURST=2000
RATE_LIMIT_ENABLED=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
HSTS_ENABLED=true
XSS_PROTECTION_ENABLED=true

# =============================================================================
# MONITORING CONFIGURATION (Latest Versions)
# =============================================================================
# Prometheus Configuration (Version 2.52.0)
PROMETHEUS_VERSION=2.52.0
PROMETHEUS_IMAGE=prom/prometheus:v2.52.0
PROMETHEUS_ENABLED=true
PROMETHEUS_HOST=prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_WEB_ENABLE_LIFECYCLE=true

# Grafana Configuration (Version 11.0.0)
GRAFANA_VERSION=11.0.0
GRAFANA_IMAGE=grafana/grafana:11.0.0
GRAFANA_ENABLED=true
GRAFANA_HOST=grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD=secure_grafana_password_2025
GRAFANA_ADMIN_USER=admin
GRAFANA_USERS_ALLOW_SIGN_UP=false
GRAFANA_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# Jaeger Configuration (Version 1.55)
JAEGER_VERSION=1.55
JAEGER_IMAGE=jaegertracing/all-in-one:1.55
JAEGER_ENABLED=true
JAEGER_HOST=jaeger
JAEGER_PORT=16686
JAEGER_SERVICE_NAME=equilibrium-platform-prod
JAEGER_SAMPLER_TYPE=const
JAEGER_SAMPLER_PARAM=0.1
JAEGER_COLLECTOR_OTLP_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_FORMAT=json
LOG_LEVEL=INFO
LOG_FILE_PATH=/var/log/equilibrium
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=30
LOG_COMPRESS=true
LOG_ROTATION_ENABLED=true

# Structured Logging
STRUCTURED_LOGGING_ENABLED=true
LOG_CORRELATION_ID_ENABLED=true
LOG_USER_CONTEXT_ENABLED=true
LOG_PERFORMANCE_METRICS_ENABLED=true

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Connection Pool Configuration
MAX_CONNECTIONS=1000
MIN_CONNECTIONS=50
CONNECTION_TIMEOUT=30
IDLE_TIMEOUT=300
MAX_LIFETIME=3600

# Request Configuration
REQUEST_TIMEOUT=30
REQUEST_SIZE_LIMIT=10MB
RESPONSE_TIMEOUT=30
KEEP_ALIVE_TIMEOUT=5

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=10000
CACHE_STRATEGY=LRU

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Core Features
ENABLE_REAL_TIME_PRICING=true
ENABLE_GEOSPATIAL_ANALYSIS=true
ENABLE_ADMIN_DASHBOARD=true
ENABLE_MONITORING=true
ENABLE_BACKUP=true

# Advanced Features
ENABLE_ML_PRICING=true
ENABLE_WEBSOCKET=true
ENABLE_NOTIFICATIONS=true
ENABLE_I18N=true
ENABLE_FAILURE_HANDLING=true

# Development Features (should be false in production)
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_SWAGGER_UI=false
ENABLE_METRICS_ENDPOINT=true
ENABLE_HEALTH_ENDPOINTS=true

# Testing Features (should be false in production)
TEST_MODE=false
MOCK_EXTERNAL_APIS=false
ENABLE_TEST_DATA=false
ENABLE_PERFORMANCE_TESTING=false

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================
# External API Configuration
EXTERNAL_API_TIMEOUT=10
EXTERNAL_API_RETRIES=3
EXTERNAL_API_RETRY_DELAY=1
EXTERNAL_API_CIRCUIT_BREAKER_ENABLED=true

# Third-party Services
GOOGLE_MAPS_API_KEY=your_google_maps_api_key
FIREBASE_PROJECT_ID=equilibrium-prod
FIREBASE_PRIVATE_KEY=your_firebase_private_key
FIREBASE_CLIENT_EMAIL=your_firebase_client_email

# Payment Gateway
PAYMENT_GATEWAY_ENABLED=true
PAYMENT_GATEWAY_URL=https://api.payment-gateway.com
PAYMENT_GATEWAY_API_KEY=your_payment_gateway_api_key
STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret

# Push Notifications
FCM_SERVER_KEY=your_fcm_server_key
APNS_KEY_ID=your_apns_key_id
APNS_TEAM_ID=your_apns_team_id
APNS_BUNDLE_ID=com.equilibrium.mobile

# Email Service
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your_smtp_password
SMTP_TLS=true

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *
BACKUP_STORAGE_TYPE=s3
BACKUP_STORAGE_PATH=s3://equilibrium-backups-prod
BACKUP_S3_BUCKET=equilibrium-backups-prod
BACKUP_S3_REGION=us-east-1
BACKUP_COMPRESSION_ENABLED=true
BACKUP_ENCRYPTION_ENABLED=true

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/equilibrium.crt
SSL_KEY_PATH=/etc/ssl/private/equilibrium.key
SSL_CA_PATH=/etc/ssl/certs/equilibrium-ca.crt
SSL_VERIFY_CLIENT=true

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
DOMAIN=yourdomain.com
API_DOMAIN=api.yourdomain.com
ADMIN_DOMAIN=admin.yourdomain.com
MOBILE_DOMAIN=mobile.yourdomain.com
DRIVER_DOMAIN=driver.yourdomain.com

# =============================================================================
# LOAD BALANCER CONFIGURATION
# =============================================================================
LOAD_BALANCER_ALGORITHM=round_robin
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# AUTO-SCALING CONFIGURATION
# =============================================================================
MIN_REPLICAS=2
MAX_REPLICAS=20
TARGET_CPU_UTILIZATION=70
TARGET_MEMORY_UTILIZATION=80

# =============================================================================
# DATABASE CONNECTION POOL
# =============================================================================
DB_POOL_SIZE=50
DB_MAX_OVERFLOW=100
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MAX_CONNECTIONS=10000
WEBSOCKET_MESSAGE_SIZE_LIMIT=1024

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
MAX_FILE_SIZE=10MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx
UPLOAD_PATH=/var/uploads

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
SESSION_SECRET=equilibrium-session-secret-production-2025
SESSION_TIMEOUT=3600
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true

# =============================================================================
# API VERSIONING
# =============================================================================
API_VERSION=v2
API_PREFIX=/api

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# METRICS CONFIGURATION
# =============================================================================
METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_PORT=9091

# =============================================================================
# TRACING CONFIGURATION
# =============================================================================
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
TRACE_SAMPLING_RATE=0.1

# =============================================================================
# ALERTING CONFIGURATION
# =============================================================================
ALERT_EMAIL=alerts@yourdomain.com
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/your/slack/webhook
ALERT_PAGERDUTY_KEY=your_pagerduty_key

# =============================================================================
# COMPLIANCE CONFIGURATION
# =============================================================================
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years
AUDIT_LOG_ENABLED=true
PRIVACY_MODE_ENABLED=true

# =============================================================================
# CONTACT & COPYRIGHT INFORMATION
# =============================================================================
PROJECT_OWNER_EMAIL=minh.nguyenkhac1983@gmail.com
PROJECT_OWNER_PHONE=+84 837873388
PROJECT_NAME=Equilibrium Dynamic Pricing Platform
COPYRIGHT_YEAR=2025
AI_SUPPORT_ENABLED=true

# =============================================================================
# PRODUCTION-SPECIFIC OVERRIDES
# =============================================================================
# Production optimizations
WORKER_PROCESSES=8
WORKER_CONNECTIONS=2048
KEEPALIVE_TIMEOUT=65
CLIENT_MAX_BODY_SIZE=10M

# Production security
ENABLE_SWAGGER=false
ENABLE_MOCK_DATA=false
ENABLE_TEST_ENDPOINTS=false
DEBUG=false